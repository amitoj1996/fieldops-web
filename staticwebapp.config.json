{
  "navigationFallback": { "rewrite": "/index.html", "exclude": ["/api/*", "/.auth/*"] },
  "routes": [
    { "route": "/", "allowedRoles": ["anonymous", "authenticated"] },

    { "route": "/admin", "allowedRoles": ["admin"] },
    { "route": "/employee", "allowedRoles": ["authenticated", "employee"] },

    { "route": "/api/report/*", "allowedRoles": ["admin"] },
    { "route": "/api/expenses/approve", "allowedRoles": ["admin"] },
    { "route": "/api/expenses/reject",  "allowedRoles": ["admin"] },
    { "route": "/api/expenses/pending", "allowedRoles": ["admin"] },
    { "route": "/api/products", "methods": ["POST"], "allowedRoles": ["admin"] },
    { "route": "/api/tasks/limits", "allowedRoles": ["admin"] },
    { "route": "/api/tasks", "methods": ["POST"], "allowedRoles": ["admin"] },

    # TEMP: open update endpoint for testing
    { "route": "/api/tasks/update", "methods": ["POST","PUT"], "allowedRoles": ["anonymous"] },

    { "route": "/api/*", "methods": ["OPTIONS"], "allowedRoles": ["anonymous"] },
    { "route": "/api/*", "allowedRoles": ["authenticated", "employee", "admin"] }
  ],
  "responseOverrides": {
    "401": { "rewrite": "/index.html" },
    "403": { "rewrite": "/index.html" }
  }
}
